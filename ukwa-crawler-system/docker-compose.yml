# UKWA Heritrix
ukwa-heritrix:
  build: ./ukwa-heritrix
  volumes:
    - ./jobs:/jobs
    - ./output:/output
  ports:
    - "8443:8443"
  links:
    - acid.matkelly.com
    - clamd
    - rabbitmq

# Clamd virus scanning Service
clamd:
  build: ./ukwa-clamd
  ports:
    - "3310:3310"

# RabbitMQ
rabbitmq:
  image: rabbitmq:3.5-management
  ports:
    - "15672:15672"  # management port (guest:guest)
    - "5672:5672"   # amqp port
    - "25672:25672" # cluster port
  log_driver: none

# PhantomJS web page rendering service
ukwa-webrender:
  build: ./ukwa-webrender
  ports:
    - "8000:8000"
  links:
    - acid.matkelly.com

# HAR Daemon
ukwa-harchiverd:
  build: ./ukwa-harchiverd
  volumes:
    - ./output/images:/images
  links:
    - rabbitmq
    - ukwa-webrender

# A test server to crawl - the Archival Acid Test site by Mat Kelly:
acid.matkelly.com:
  build: ../docker-archival-acid-test
  ports:
    - "5000:80"
  hostname: acid
  domainname: matkelly.com

# a tester process to talk to Heritrix, probably via python-heritrix
# ...
